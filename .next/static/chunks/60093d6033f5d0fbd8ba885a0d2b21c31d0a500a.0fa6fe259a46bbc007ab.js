(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{"4r7v":function(e,t,r){e.exports={error:"ErrorMessage_error__3ZjHd",icon:"ErrorMessage_icon__1cEeC"}},CDh1:function(e,t,r){e.exports={title:"WebsiteHeader_title__hGIb-",link:"WebsiteHeader_link__2bwZL",active:"WebsiteHeader_active__5r1FR"}},GrYM:function(e,t,r){e.exports={container:"WebsiteChart_container__3Ep77",title:"WebsiteChart_title__2cmt6",header:"WebsiteChart_header__3Gb2R",metrics:"WebsiteChart_metrics__33aMf",sticky:"WebsiteChart_sticky__1O07I",filter:"WebsiteChart_filter__2zrCT",url:"WebsiteChart_url__qWu22"}},IZIc:function(e,t,r){e.exports={loading:"Loading_loading__2pPUq",blink:"Loading_blink__1PtEJ"}},JDPv:function(e,t,r){"use strict";var c,a=r("q1tI");function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e}).apply(this,arguments)}t.a=function(e){return a.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),c||(c=a.createElement("path",{d:"M216.464 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L387.887 239H12c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h375.887L209.393 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L233.434 36.465c-4.686-4.687-12.284-4.687-16.97 0z"})))}},MPiW:function(e,t,r){"use strict";r.d(t,"a",(function(){return j}));var c,a=r("nKUr"),n=r("q1tI"),s=r("kriW"),i=r("atwx");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e}).apply(this,arguments)}var l=function(e){return n.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e),c||(c=n.createElement("path",{d:"M270.2 160h35.5c3.4 0 6.1 2.8 6 6.2l-7.5 196c-.1 3.2-2.8 5.8-6 5.8h-20.5c-3.2 0-5.9-2.5-6-5.8l-7.5-196c-.1-3.4 2.6-6.2 6-6.2zM288 388c-15.5 0-28 12.5-28 28s12.5 28 28 28 28-12.5 28-28-12.5-28-28-28zm281.5 52L329.6 24c-18.4-32-64.7-32-83.2 0L6.5 440c-18.4 31.9 4.6 72 41.6 72H528c36.8 0 60-40 41.5-72zM528 480H48c-12.3 0-20-13.3-13.9-24l240-416c6.1-10.6 21.6-10.7 27.7 0l240 416c6.2 10.6-1.5 24-13.8 24z"})))},u=r("4r7v"),b=r.n(u);function j(){return Object(a.jsxs)("div",{className:b.a.error,children:[Object(a.jsx)(i.a,{icon:Object(a.jsx)(l,{}),className:b.a.icon,size:"large"}),Object(a.jsx)(s.a,{id:"message.failure",defaultMessage:"Something went wrong."})]})}},OiYy:function(e,t,r){"use strict";r.d(t,"a",(function(){return $}));var c=r("nKUr"),a=r("cpVT"),n=r("xvhg"),s=r("q1tI"),i=r("TSYQ"),o=r.n(i),l=r("rqNM"),u=r("kriW"),b=r("hnLT"),j=r("MPiW"),d=r("0Kmt"),O=r("G8Ct"),v=r("y4Yb"),f=r("bzoS"),h=r("GGPy"),p=r("YSmr"),m=r("NgRG"),x=r("l+P1"),w=r.n(x);function g(e){var t=e.websiteId,r=e.className,i=Object(f.a)(),l=Object(O.a)(t),x=Object(n.a)(l,1)[0],g=x.startDate,_=x.endDate,y=x.modified,k=Object(s.useState)(!0),N=k[0],P=k[1],M=Object(v.a)().query.url,C=Object(d.a)("/api/website/".concat(t,"/stats"),{params:{start_at:+g,end_at:+_,url:M},headers:Object(a.a)({},p.r,null===i||void 0===i?void 0:i.token)},[M,y]),I=C.data,E=C.error,D=C.loading,L=N?h.a:h.b;var q=I||{},W=q.pageviews,z=q.uniques,S=q.bounces,T=q.totaltime,R=Math.min(z,S);return Object(c.jsxs)("div",{className:o()(w.a.bar,r),onClick:function(){P((function(e){return!e}))},children:[!I&&D&&Object(c.jsx)(b.a,{}),E&&Object(c.jsx)(j.a,{}),I&&!E&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(m.a,{label:Object(c.jsx)(u.a,{id:"metrics.views",defaultMessage:"Views"}),value:W,format:L}),Object(c.jsx)(m.a,{label:Object(c.jsx)(u.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),value:z,format:L}),Object(c.jsx)(m.a,{label:Object(c.jsx)(u.a,{id:"metrics.bounce-rate",defaultMessage:"Bounce rate"}),value:z?R/z*100:0,format:function(e){return Number(e).toFixed(0)+"%"}}),Object(c.jsx)(m.a,{label:Object(c.jsx)(u.a,{id:"metrics.average-visit-time",defaultMessage:"Average visit time"}),value:T&&W?T/(W-S):0,format:function(e){return Object(h.c)(e,["m","s"]," ")}})]})]})}var _,y=r("pjx/"),k=r("tfvX"),N=r("/MKj"),P=r("nn0s"),M=r("4qaV");function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c])}return e}).apply(this,arguments)}var I=function(e){return s.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),_||(_=s.createElement("path",{d:"M500 8h-27.711c-6.739 0-12.157 5.548-11.997 12.286l2.347 98.568C418.075 51.834 341.788 7.73 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.165 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-19.738-19.738c-4.498-4.498-11.753-4.785-16.501-.552C351.787 433.246 306.105 452 256 452c-108.322 0-196-87.662-196-196 0-108.322 87.662-196 196-196 79.545 0 147.941 47.282 178.675 115.302l-126.389-3.009c-6.737-.16-12.286 5.257-12.286 11.997V212c0 6.627 5.373 12 12 12h192c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"})))},E=r("1ETy"),D=r("rIuf"),L=r("nsFc");var q=function(e){var t=e.websiteId,r=Object(N.b)(),a=Object(L.a)(),i=Object(n.a)(a,1)[0],o=Object(O.a)(t),l=Object(n.a)(o,1)[0],b=Object(s.useState)(!1),j=b[0],d=b[1],v=Object(N.c)((function(e){return e.queries["/api/website/".concat(t,"/stats")]}));return Object(s.useEffect)((function(){d(!1)}),[v]),Object(c.jsx)(M.a,{icon:j?Object(c.jsx)(E.a,{}):Object(c.jsx)(I,{}),tooltip:Object(c.jsx)(u.a,{id:"label.refresh",defaultMessage:"Refresh"}),tooltipId:"button-refresh",size:"small",onClick:function(){l&&(d(!0),r(Object(P.b)(t,Object(D.d)(l.value,i))))}})},W=r("TOCn"),z=r("ZJFB"),S=r("ty6r"),T=r("u605"),R=r.n(T);function H(e){var t=e.websiteId,r=e.className,n=Object(f.a)(),i=Object(d.a)("/api/website/".concat(t,"/active"),{interval:6e4,headers:Object(a.a)({},p.r,null===n||void 0===n?void 0:n.token)}).data,l=Object(s.useMemo)((function(){var e;return(null===i||void 0===i||null===(e=i[0])||void 0===e?void 0:e.x)||0}),[i]);return 0===l?null:Object(c.jsxs)("div",{className:o()(R.a.container,r),children:[Object(c.jsx)(S.a,{}),Object(c.jsx)("div",{className:R.a.text,children:Object(c.jsx)("div",{children:Object(c.jsx)(u.a,{id:"message.active-users",defaultMessage:"{x} current {x, plural, one {visitor} other {visitors}}",values:{x:l}})})})]})}var G=r("JDPv"),Y=r("CDh1"),F=r.n(Y);function J(e){var t=e.websiteId,r=e.title,a=e.domain,n=e.showLink,s=void 0!==n&&n,i=s?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(z.a,{domain:a}),Object(c.jsx)(y.a,{href:"/website/[...id]",as:"/website/".concat(t,"/").concat(r),children:r})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)(z.a,{domain:a}),r]});return Object(c.jsxs)(k.a,{children:[Object(c.jsx)("div",{className:F.a.title,children:i}),Object(c.jsx)(H,{className:F.a.active,websiteId:t}),Object(c.jsxs)(W.a,{align:"right",children:[Object(c.jsx)(q,{websiteId:t}),s&&Object(c.jsx)(y.a,{href:"/website/[...id]",as:"/website/".concat(t,"/").concat(r),className:F.a.link,icon:Object(c.jsx)(G.a,{}),size:"small",iconRight:!0,children:Object(c.jsx)(u.a,{id:"label.view-details",defaultMessage:"View details"})})]})]})}var K=r("NC3K");function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e){var t,r=e.className,n=e.stickyClassName,i=e.stickyStyle,l=e.children,u=e.enabled,b=void 0===u||u,j=Object(s.useState)(!1),d=j[0],O=j[1],v=Object(s.useRef)(),f=Object(s.useRef)(0);return Object(s.useEffect)((function(){var e=function(){if(v.current){f.current||(f.current=v.current.offsetTop+v.current.offsetHeight);var e=window.pageYOffset>f.current;d!==e&&O(e)}};return e(),b&&window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[d,b]),Object(c.jsx)("div",{ref:v,"data-sticky":d,className:o()(r,Object(a.a)({},n,d)),style:d?V(V({},i),{},{width:null===v||void 0===v||null===(t=v.current)||void 0===t?void 0:t.clientWidth}):null,children:l})}var A=r("TdLA"),Z=r("InOs"),Q=r("GrYM"),X=r.n(Q);function $(e){var t=e.websiteId,r=e.title,i=e.domain,u=e.stickyHeader,b=void 0!==u&&u,h=e.showLink,m=void 0!==h&&h,x=e.hideChart,w=void 0!==x&&x,_=e.onDataLoad,y=void 0===_?function(){}:_,k=Object(f.a)(),N=Object(O.a)(t),P=Object(n.a)(N,2),M=P[0],C=P[1],I=M.startDate,E=M.endDate,L=M.unit,q=M.value,W=M.modified,z=Object(A.a)(),S=Object(n.a)(z,1)[0],T=Object(v.a)(),R=T.router,H=T.resolve,G=T.query.url,Y=Object(d.a)("/api/website/".concat(t,"/pageviews"),{params:{start_at:+I,end_at:+E,unit:L,tz:S,url:G},onDataLoad:y,headers:Object(a.a)({},p.r,null===k||void 0===k?void 0:k.token)},[G,W]),F=Y.data,U=Y.loading,V=Y.error,Z=Object(s.useMemo)((function(){return F?{pageviews:Object(D.b)(F.pageviews,I,E,L),sessions:Object(D.b)(F.sessions,I,E,L)}:{pageviews:[],sessions:[]}}),[F]);return Object(c.jsxs)("div",{className:X.a.container,children:[Object(c.jsx)(J,{websiteId:t,title:r,domain:i,showLink:m}),Object(c.jsx)("div",{className:o()(X.a.header,"row"),children:Object(c.jsxs)(B,{className:o()(X.a.metrics,"col row"),stickyClassName:X.a.sticky,enabled:b,children:[G&&Object(c.jsx)(ee,{url:G,onClick:function(){R.push(H({url:void 0}))}}),Object(c.jsx)("div",{className:"col-12 col-lg-9",children:Object(c.jsx)(g,{websiteId:t})}),Object(c.jsx)("div",{className:o()(X.a.filter,"col-12 col-lg-3"),children:Object(c.jsx)(K.a,{value:q,startDate:I,endDate:E,onChange:C})})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col",children:[V&&Object(c.jsx)(j.a,{}),!w&&Object(c.jsx)(l.a,{websiteId:t,data:Z,unit:L,records:Object(D.c)(I,E,L),loading:U})]})})]})}var ee=function(e){var t=e.url,r=e.onClick;return Object(c.jsx)("div",{className:o()(X.a.url,"col-12"),children:Object(c.jsx)(M.a,{icon:Object(c.jsx)(Z.a,{}),onClick:r,variant:"action",iconRight:!0,children:t})})}},bzoS:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var c=r("vJKn"),a=r.n(c),n=r("rg98"),s=r("q1tI"),i=r("/MKj"),o=r("20a2"),l=r("jeBt"),u=r("DzNn");function b(e){var t=Object(o.useRouter)().basePath,r=Object(i.b)(),c=Object(i.c)((function(e){return e.app.shareToken}));function b(){return(b=Object(n.a)(a.a.mark((function e(c){var n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.b)("".concat(t,"/api/share/").concat(c));case 2:n=e.sent,(s=n.data)&&r(Object(u.d)(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){e&&function(e){b.apply(this,arguments)}(e)}),[e]),c}},hnLT:function(e,t,r){"use strict";var c=r("nKUr"),a=(r("q1tI"),r("TSYQ")),n=r.n(a),s=r("IZIc"),i=r.n(s);t.a=function(e){var t=e.className;return Object(c.jsxs)("div",{className:n()(i.a.loading,t),children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}},"l+P1":function(e,t,r){e.exports={bar:"MetricsBar_bar__Tmn6-"}},u605:function(e,t,r){e.exports={container:"ActiveUsers_container__21JqF",text:"ActiveUsers_text__6F-2f",value:"ActiveUsers_value__1HMGv"}},y4Yb:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var c=r("cpVT"),a=r("xvhg"),n=r("q1tI"),s=r("20a2"),i=r("7T8v");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){var e=Object(s.useRouter)(),t=location,r=t.pathname,c=t.search,o=Object(n.useMemo)((function(){return c?c.substring(1).split("&").reduce((function(e,t){var r=t.split("="),c=Object(a.a)(r,2),n=c[0],s=c[1];return e[n]=decodeURIComponent(s),e}),{}):{}}),[c]);return{pathname:r,query:o,resolve:function(t){var r=Object(i.b)(l(l({},o),t)),c=e.asPath;return"".concat(c.split("?")[0]).concat(r)},router:e}}}}]);