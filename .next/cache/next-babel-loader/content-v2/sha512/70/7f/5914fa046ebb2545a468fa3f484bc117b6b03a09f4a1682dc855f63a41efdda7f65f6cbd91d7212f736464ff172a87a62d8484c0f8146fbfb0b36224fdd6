{"ast":null,"code":"import { getAccounts } from 'lib/queries';\nimport { useAuth } from 'lib/middleware';\nimport { ok, unauthorized, methodNotAllowed } from 'lib/response';\nexport default (async (req, res) => {\n  await useAuth(req, res);\n  const {\n    is_admin\n  } = req.auth;\n\n  if (!is_admin) {\n    return unauthorized(res);\n  }\n\n  if (req.method === 'GET') {\n    const accounts = await getAccounts();\n    return ok(res, accounts);\n  }\n\n  return methodNotAllowed(res);\n});","map":null,"metadata":{},"sourceType":"module"}