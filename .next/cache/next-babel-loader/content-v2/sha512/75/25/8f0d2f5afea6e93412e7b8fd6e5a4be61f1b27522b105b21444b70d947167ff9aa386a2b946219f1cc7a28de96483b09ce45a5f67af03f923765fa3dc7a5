{"ast":null,"code":"import _defineProperty from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { makeUrl } from './url';\nexport var apiRequest = function apiRequest(method, url, body, headers) {\n  return fetch(url, {\n    method: method,\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: _objectSpread({\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }, headers),\n    body: body\n  }).then(function (res) {\n    if (res.ok) {\n      return res.json().then(function (data) {\n        return {\n          ok: res.ok,\n          status: res.status,\n          data: data\n        };\n      });\n    }\n\n    return res.text().then(function (data) {\n      return {\n        ok: res.ok,\n        status: res.status,\n        res: res,\n        data: data\n      };\n    });\n  });\n};\nexport var get = function get(url, params, headers) {\n  return apiRequest('get', makeUrl(url, params), undefined, headers);\n};\nexport var del = function del(url, params, headers) {\n  return apiRequest('delete', makeUrl(url, params), undefined, headers);\n};\nexport var post = function post(url, params, headers) {\n  return apiRequest('post', url, JSON.stringify(params), headers);\n};\nexport var put = function put(url, params, headers) {\n  return apiRequest('put', url, JSON.stringify(params), headers);\n};\nexport var hook = function hook(_this, method, callback) {\n  var orig = _this[method];\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(null, args);\n    return orig.apply(_this, args);\n  };\n};\nexport var doNotTrack = function doNotTrack() {\n  var _window = window,\n      doNotTrack = _window.doNotTrack,\n      navigator = _window.navigator,\n      external = _window.external;\n\n  var msTracking = function msTracking() {\n    return external && typeof external.msTrackingProtectionEnabled === 'function' && external.msTrackingProtectionEnabled();\n  };\n\n  var dnt = doNotTrack || navigator.doNotTrack || navigator.msDoNotTrack || msTracking();\n  return dnt === true || dnt === 1 || dnt === 'yes' || dnt === '1';\n};\nexport var setItem = function setItem(key, data, session) {\n  if (true) {\n    (session ? sessionStorage : localStorage).setItem(key, JSON.stringify(data));\n  }\n};\nexport var getItem = function getItem(key, session) {\n  return true ? JSON.parse((session ? sessionStorage : localStorage).getItem(key)) : null;\n};","map":null,"metadata":{},"sourceType":"module"}