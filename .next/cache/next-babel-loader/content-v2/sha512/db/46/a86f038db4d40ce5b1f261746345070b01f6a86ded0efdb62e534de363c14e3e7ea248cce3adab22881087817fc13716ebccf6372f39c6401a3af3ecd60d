{"ast":null,"code":"import { deleteWebsite, getWebsiteById } from 'lib/queries';\nimport { methodNotAllowed, ok, unauthorized } from 'lib/response';\nimport { allowQuery } from 'lib/auth';\nexport default (async (req, res) => {\n  const {\n    id\n  } = req.query;\n  const websiteId = +id;\n\n  if (req.method === 'GET') {\n    if (!(await allowQuery(req))) {\n      return unauthorized(res);\n    }\n\n    const website = await getWebsiteById(websiteId);\n    return ok(res, website);\n  }\n\n  if (req.method === 'DELETE') {\n    if (!(await allowQuery(req, true))) {\n      return unauthorized(res);\n    }\n\n    await deleteWebsite(websiteId);\n    return ok(res);\n  }\n\n  return methodNotAllowed(res);\n});","map":null,"metadata":{},"sourceType":"module"}