{"ast":null,"code":"import { getActiveVisitors } from 'lib/queries';\nimport { methodNotAllowed, ok, unauthorized } from 'lib/response';\nimport { allowQuery } from 'lib/auth';\nexport default (async (req, res) => {\n  if (req.method === 'GET') {\n    if (!(await allowQuery(req))) {\n      return unauthorized(res);\n    }\n\n    const {\n      id\n    } = req.query;\n    const websiteId = +id;\n    const result = await getActiveVisitors(websiteId);\n    return ok(res, result);\n  }\n\n  return methodNotAllowed(res);\n});","map":null,"metadata":{},"sourceType":"module"}