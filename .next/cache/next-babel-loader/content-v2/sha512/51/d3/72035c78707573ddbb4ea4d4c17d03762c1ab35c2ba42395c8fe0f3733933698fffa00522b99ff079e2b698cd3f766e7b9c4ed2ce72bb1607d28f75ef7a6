{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { FixedSizeList } from 'react-window';\nimport { useSpring, animated, config } from 'react-spring';\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\nimport NoData from 'components/common/NoData';\nimport { formatNumber, formatLongNumber } from 'lib/format';\nimport styles from './DataTable.module.css';\nexport default function DataTable(_ref) {\n  var data = _ref.data,\n      title = _ref.title,\n      metric = _ref.metric,\n      className = _ref.className,\n      renderLabel = _ref.renderLabel,\n      height = _ref.height,\n      _ref$animate = _ref.animate,\n      animate = _ref$animate === void 0 ? true : _ref$animate,\n      _ref$virtualize = _ref.virtualize,\n      virtualize = _ref$virtualize === void 0 ? false : _ref$virtualize;\n\n  var _useState = useState(true),\n      format = _useState[0],\n      setFormat = _useState[1];\n\n  var formatFunc = format ? formatLongNumber : formatNumber;\n\n  var handleSetFormat = function handleSetFormat() {\n    return setFormat(function (state) {\n      return !state;\n    });\n  };\n\n  var getRow = function getRow(row) {\n    var label = row.x,\n        value = row.y,\n        percent = row.z;\n    return /*#__PURE__*/_jsx(AnimatedRow, {\n      label: renderLabel ? renderLabel(row) : label !== null && label !== void 0 ? label : /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.unknown\",\n        defaultMessage: \"Unknown\"\n      }),\n      value: value,\n      percent: percent,\n      animate: animate && !virtualize,\n      format: formatFunc,\n      onClick: handleSetFormat\n    }, label);\n  };\n\n  var Row = function Row(_ref2) {\n    var index = _ref2.index,\n        style = _ref2.style;\n    return /*#__PURE__*/_jsx(\"div\", {\n      style: style,\n      children: getRow(data[index])\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: classNames(styles.table, className),\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.header,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.title,\n        children: title\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.metric,\n        onClick: handleSetFormat,\n        children: metric\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.body,\n      style: {\n        height: height\n      },\n      children: [(data === null || data === void 0 ? void 0 : data.length) === 0 && /*#__PURE__*/_jsx(NoData, {}), virtualize && data.length > 0 ? /*#__PURE__*/_jsx(FixedSizeList, {\n        height: height,\n        itemCount: data.length,\n        itemSize: 30,\n        children: Row\n      }) : data.map(function (row) {\n        return getRow(row);\n      })]\n    })]\n  });\n}\n\nvar AnimatedRow = function AnimatedRow(_ref3) {\n  var _props$y;\n\n  var label = _ref3.label,\n      _ref3$value = _ref3.value,\n      value = _ref3$value === void 0 ? 0 : _ref3$value,\n      percent = _ref3.percent,\n      animate = _ref3.animate,\n      format = _ref3.format,\n      onClick = _ref3.onClick;\n  var props = useSpring({\n    width: percent,\n    y: value,\n    from: {\n      width: 0,\n      y: 0\n    },\n    config: animate ? config[\"default\"] : {\n      duration: 0\n    }\n  });\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.row,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.label,\n      children: label\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.value,\n      onClick: onClick,\n      children: /*#__PURE__*/_jsx(animated.div, {\n        className: styles.value,\n        children: (_props$y = props.y) === null || _props$y === void 0 ? void 0 : _props$y.interpolate(format)\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.percent,\n      children: [/*#__PURE__*/_jsx(animated.div, {\n        className: styles.bar,\n        style: {\n          width: props.width.interpolate(function (n) {\n            return \"\".concat(n, \"%\");\n          })\n        }\n      }), /*#__PURE__*/_jsx(animated.span, {\n        className: styles.percentValue,\n        children: props.width.interpolate(function (n) {\n          return \"\".concat(n.toFixed(0), \"%\");\n        })\n      })]\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}