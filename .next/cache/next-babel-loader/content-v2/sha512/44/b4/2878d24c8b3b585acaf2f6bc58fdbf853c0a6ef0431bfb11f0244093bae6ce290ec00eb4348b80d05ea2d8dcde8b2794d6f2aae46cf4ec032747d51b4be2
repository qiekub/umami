{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { FormattedMessage } from 'react-intl';\nimport { setDateRange } from 'redux/actions/websites';\nimport Button from './Button';\nimport Refresh from 'assets/redo.svg';\nimport Dots from 'assets/ellipsis-h.svg';\nimport useDateRange from 'hooks/useDateRange';\nimport { getDateRange } from '../../lib/date';\nimport useLocale from 'hooks/useLocale';\n\nfunction RefreshButton(_ref) {\n  var websiteId = _ref.websiteId;\n  var dispatch = useDispatch();\n\n  var _useLocale = useLocale(),\n      _useLocale2 = _slicedToArray(_useLocale, 1),\n      locale = _useLocale2[0];\n\n  var _useDateRange = useDateRange(websiteId),\n      _useDateRange2 = _slicedToArray(_useDateRange, 1),\n      dateRange = _useDateRange2[0];\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var completed = useSelector(function (state) {\n    return state.queries[\"/api/website/\".concat(websiteId, \"/stats\")];\n  });\n\n  function handleClick() {\n    if (dateRange) {\n      setLoading(true);\n      dispatch(setDateRange(websiteId, getDateRange(dateRange.value, locale)));\n    }\n  }\n\n  useEffect(function () {\n    setLoading(false);\n  }, [completed]);\n  return /*#__PURE__*/_jsx(Button, {\n    icon: loading ? /*#__PURE__*/_jsx(Dots, {}) : /*#__PURE__*/_jsx(Refresh, {}),\n    tooltip: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"label.refresh\",\n      defaultMessage: \"Refresh\"\n    }),\n    tooltipId: \"button-refresh\",\n    size: \"small\",\n    onClick: handleClick\n  });\n}\n\nexport default RefreshButton;","map":null,"metadata":{},"sourceType":"module"}