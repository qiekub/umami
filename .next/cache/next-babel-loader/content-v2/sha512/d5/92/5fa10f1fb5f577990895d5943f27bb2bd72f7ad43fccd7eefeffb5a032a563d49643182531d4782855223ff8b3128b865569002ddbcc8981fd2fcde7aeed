{"ast":null,"code":"import { getWebsiteByShareId } from 'lib/queries';\nimport { ok, notFound, methodNotAllowed } from 'lib/response';\nimport { createToken } from 'lib/crypto';\nexport default (async (req, res) => {\n  const {\n    id\n  } = req.query;\n\n  if (req.method === 'GET') {\n    const website = await getWebsiteByShareId(id);\n\n    if (website) {\n      const websiteId = website.website_id;\n      const token = await createToken({\n        website_id: websiteId\n      });\n      return ok(res, {\n        websiteId,\n        token\n      });\n    }\n\n    return notFound(res);\n  }\n\n  return methodNotAllowed(res);\n});","map":null,"metadata":{},"sourceType":"module"}