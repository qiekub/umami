{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useState } from 'react';\nimport classNames from 'classnames';\nimport { startOfWeek, startOfMonth, startOfYear, endOfMonth, addDays, subDays, addYears, subYears, addMonths, setMonth, setYear, isSameDay, isBefore, isAfter } from 'date-fns';\nimport Button from './Button';\nimport useLocale from 'hooks/useLocale';\nimport { dateFormat } from 'lib/date';\nimport { chunk } from 'lib/array';\nimport { dateLocales } from 'lib/lang';\nimport Chevron from 'assets/chevron-down.svg';\nimport Cross from 'assets/times.svg';\nimport styles from './Calendar.module.css';\nimport Icon from './Icon';\nexport default function Calendar(_ref) {\n  var date = _ref.date,\n      minDate = _ref.minDate,\n      maxDate = _ref.maxDate,\n      onChange = _ref.onChange;\n\n  var _useLocale = useLocale(),\n      _useLocale2 = _slicedToArray(_useLocale, 1),\n      locale = _useLocale2[0];\n\n  var _useState = useState(false),\n      selectMonth = _useState[0],\n      setSelectMonth = _useState[1];\n\n  var _useState2 = useState(false),\n      selectYear = _useState2[0],\n      setSelectYear = _useState2[1];\n\n  var month = dateFormat(date, 'MMMM', locale);\n  var year = date.getFullYear();\n\n  function toggleMonthSelect() {\n    setSelectYear(false);\n    setSelectMonth(function (state) {\n      return !state;\n    });\n  }\n\n  function toggleYearSelect() {\n    setSelectMonth(false);\n    setSelectYear(function (state) {\n      return !state;\n    });\n  }\n\n  function handleChange(value) {\n    setSelectMonth(false);\n    setSelectYear(false);\n\n    if (value) {\n      onChange(value);\n    }\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.calendar,\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: styles.header,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: date.getDate()\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classNames(styles.selector, _defineProperty({}, styles.open, selectMonth)),\n        onClick: toggleMonthSelect,\n        children: [month, /*#__PURE__*/_jsx(Icon, {\n          className: styles.icon,\n          icon: selectMonth ? /*#__PURE__*/_jsx(Cross, {}) : /*#__PURE__*/_jsx(Chevron, {}),\n          size: \"small\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: classNames(styles.selector, _defineProperty({}, styles.open, selectYear)),\n        onClick: toggleYearSelect,\n        children: [year, /*#__PURE__*/_jsx(Icon, {\n          className: styles.icon,\n          icon: selectYear ? /*#__PURE__*/_jsx(Cross, {}) : /*#__PURE__*/_jsx(Chevron, {}),\n          size: \"small\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.body,\n      children: [!selectMonth && !selectYear && /*#__PURE__*/_jsx(DaySelector, {\n        date: date,\n        minDate: minDate,\n        maxDate: maxDate,\n        locale: locale,\n        onSelect: handleChange\n      }), selectMonth && /*#__PURE__*/_jsx(MonthSelector, {\n        date: date,\n        minDate: minDate,\n        maxDate: maxDate,\n        locale: locale,\n        onSelect: handleChange,\n        onClose: toggleMonthSelect\n      }), selectYear && /*#__PURE__*/_jsx(YearSelector, {\n        date: date,\n        minDate: minDate,\n        maxDate: maxDate,\n        onSelect: handleChange,\n        onClose: toggleYearSelect\n      })]\n    })]\n  });\n}\n\nvar DaySelector = function DaySelector(_ref2) {\n  var date = _ref2.date,\n      minDate = _ref2.minDate,\n      maxDate = _ref2.maxDate,\n      locale = _ref2.locale,\n      onSelect = _ref2.onSelect;\n  var startWeek = startOfWeek(date, {\n    locale: dateLocales[locale]\n  });\n  var startMonth = startOfMonth(date, {\n    locale: dateLocales[locale]\n  });\n  var startDay = subDays(startMonth, startMonth.getDay());\n  var month = date.getMonth();\n  var year = date.getFullYear();\n  var daysOfWeek = [];\n\n  for (var i = 0; i < 7; i++) {\n    daysOfWeek.push(addDays(startWeek, i));\n  }\n\n  var days = [];\n\n  for (var _i = 0; _i < 35; _i++) {\n    days.push(addDays(startDay, _i));\n  }\n\n  return /*#__PURE__*/_jsxs(\"table\", {\n    children: [/*#__PURE__*/_jsx(\"thead\", {\n      children: /*#__PURE__*/_jsx(\"tr\", {\n        children: daysOfWeek.map(function (day, i) {\n          return /*#__PURE__*/_jsx(\"th\", {\n            className: locale,\n            children: dateFormat(day, 'EEE', locale)\n          }, i);\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"tbody\", {\n      children: chunk(days, 7).map(function (week, i) {\n        return /*#__PURE__*/_jsx(\"tr\", {\n          children: week.map(function (day, j) {\n            var _classNames3;\n\n            var disabled = isBefore(day, minDate) || isAfter(day, maxDate);\n            return /*#__PURE__*/_jsx(\"td\", {\n              className: classNames((_classNames3 = {}, _defineProperty(_classNames3, styles.selected, isSameDay(date, day)), _defineProperty(_classNames3, styles.faded, day.getMonth() !== month || day.getFullYear() !== year), _defineProperty(_classNames3, styles.disabled, disabled), _classNames3)),\n              onClick: !disabled ? function () {\n                return onSelect(day);\n              } : null,\n              children: day.getDate()\n            }, j);\n          })\n        }, i);\n      })\n    })]\n  });\n};\n\nvar MonthSelector = function MonthSelector(_ref3) {\n  var date = _ref3.date,\n      minDate = _ref3.minDate,\n      maxDate = _ref3.maxDate,\n      locale = _ref3.locale,\n      onSelect = _ref3.onSelect;\n  var start = startOfYear(date);\n  var months = [];\n\n  for (var i = 0; i < 12; i++) {\n    months.push(addMonths(start, i));\n  }\n\n  function handleSelect(value) {\n    onSelect(setMonth(date, value));\n  }\n\n  return /*#__PURE__*/_jsx(\"table\", {\n    children: /*#__PURE__*/_jsx(\"tbody\", {\n      children: chunk(months, 3).map(function (row, i) {\n        return /*#__PURE__*/_jsx(\"tr\", {\n          children: row.map(function (month, j) {\n            var _classNames4;\n\n            var disabled = isBefore(endOfMonth(month), minDate) || isAfter(startOfMonth(month), maxDate);\n            return /*#__PURE__*/_jsx(\"td\", {\n              className: classNames(locale, (_classNames4 = {}, _defineProperty(_classNames4, styles.selected, month.getMonth() === date.getMonth()), _defineProperty(_classNames4, styles.disabled, disabled), _classNames4)),\n              onClick: !disabled ? function () {\n                return handleSelect(month.getMonth());\n              } : null,\n              children: dateFormat(month, 'MMMM', locale)\n            }, j);\n          })\n        }, i);\n      })\n    })\n  });\n};\n\nvar YearSelector = function YearSelector(_ref4) {\n  var date = _ref4.date,\n      minDate = _ref4.minDate,\n      maxDate = _ref4.maxDate,\n      onSelect = _ref4.onSelect;\n\n  var _useState3 = useState(date),\n      currentDate = _useState3[0],\n      setCurrentDate = _useState3[1];\n\n  var year = date.getFullYear();\n  var currentYear = currentDate.getFullYear();\n  var minYear = minDate.getFullYear();\n  var maxYear = maxDate.getFullYear();\n  var years = [];\n\n  for (var i = 0; i < 15; i++) {\n    years.push(currentYear - 7 + i);\n  }\n\n  function handleSelect(value) {\n    onSelect(setYear(date, value));\n  }\n\n  function handlePrevClick() {\n    setCurrentDate(function (state) {\n      return subYears(state, 15);\n    });\n  }\n\n  function handleNextClick() {\n    setCurrentDate(function (state) {\n      return addYears(state, 15);\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.pager,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.left,\n      children: /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Chevron, {}),\n        size: \"small\",\n        onClick: handlePrevClick,\n        disabled: years[0] <= minYear,\n        variant: \"light\"\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.middle,\n      children: /*#__PURE__*/_jsx(\"table\", {\n        children: /*#__PURE__*/_jsx(\"tbody\", {\n          children: chunk(years, 5).map(function (row, i) {\n            return /*#__PURE__*/_jsx(\"tr\", {\n              children: row.map(function (n, j) {\n                var _classNames5;\n\n                return /*#__PURE__*/_jsx(\"td\", {\n                  className: classNames((_classNames5 = {}, _defineProperty(_classNames5, styles.selected, n === year), _defineProperty(_classNames5, styles.disabled, n < minYear || n > maxYear), _classNames5)),\n                  onClick: function onClick() {\n                    return n < minYear || n > maxYear ? null : handleSelect(n);\n                  },\n                  children: n\n                }, j);\n              })\n            }, i);\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.right,\n      children: /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Chevron, {}),\n        size: \"small\",\n        onClick: handleNextClick,\n        disabled: years[years.length - 1] > maxYear,\n        variant: \"light\"\n      })\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}