{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport Link from 'components/common/Link';\nimport Table from 'components/common/Table';\nimport Button from 'components/common/Button';\nimport PageHeader from 'components/layout/PageHeader';\nimport Modal from 'components/common/Modal';\nimport WebsiteEditForm from 'components/forms/WebsiteEditForm';\nimport DeleteForm from 'components/forms/DeleteForm';\nimport TrackingCodeForm from 'components/forms/TrackingCodeForm';\nimport ShareUrlForm from 'components/forms/ShareUrlForm';\nimport EmptyPlaceholder from 'components/common/EmptyPlaceholder';\nimport ButtonLayout from 'components/layout/ButtonLayout';\nimport Toast from 'components/common/Toast';\nimport Favicon from 'components/common/Favicon';\nimport Pen from 'assets/pen.svg';\nimport Trash from 'assets/trash.svg';\nimport Plus from 'assets/plus.svg';\nimport Code from 'assets/code.svg';\nimport LinkIcon from 'assets/link.svg';\nimport useFetch from 'hooks/useFetch';\nimport styles from './WebsiteSettings.module.css';\nexport default function WebsiteSettings() {\n  var _useState = useState(),\n      editWebsite = _useState[0],\n      setEditWebsite = _useState[1];\n\n  var _useState2 = useState(),\n      deleteWebsite = _useState2[0],\n      setDeleteWebsite = _useState2[1];\n\n  var _useState3 = useState(),\n      addWebsite = _useState3[0],\n      setAddWebsite = _useState3[1];\n\n  var _useState4 = useState(),\n      showCode = _useState4[0],\n      setShowCode = _useState4[1];\n\n  var _useState5 = useState(),\n      showUrl = _useState5[0],\n      setShowUrl = _useState5[1];\n\n  var _useState6 = useState(0),\n      saved = _useState6[0],\n      setSaved = _useState6[1];\n\n  var _useState7 = useState(),\n      message = _useState7[0],\n      setMessage = _useState7[1];\n\n  var _useFetch = useFetch(\"/api/websites\", {}, [saved]),\n      data = _useFetch.data;\n\n  var Buttons = function Buttons(row) {\n    return /*#__PURE__*/_jsxs(ButtonLayout, {\n      align: \"right\",\n      children: [row.share_id && /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(LinkIcon, {}),\n        size: \"small\",\n        tooltip: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"message.get-share-url\",\n          defaultMessage: \"Get share URL\"\n        }),\n        tooltipId: \"button-share-\".concat(row.website_id),\n        onClick: function onClick() {\n          return setShowUrl(row);\n        }\n      }), /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Code, {}),\n        size: \"small\",\n        tooltip: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"message.get-tracking-code\",\n          defaultMessage: \"Get tracking code\"\n        }),\n        tooltipId: \"button-code-\".concat(row.website_id),\n        onClick: function onClick() {\n          return setShowCode(row);\n        }\n      }), /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Pen, {}),\n        size: \"small\",\n        onClick: function onClick() {\n          return setEditWebsite(row);\n        },\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"label.edit\",\n          defaultMessage: \"Edit\"\n        })\n      }), /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Trash, {}),\n        size: \"small\",\n        onClick: function onClick() {\n          return setDeleteWebsite(row);\n        },\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"label.delete\",\n          defaultMessage: \"Delete\"\n        })\n      })]\n    });\n  };\n\n  var DetailsLink = function DetailsLink(_ref) {\n    var website_id = _ref.website_id,\n        name = _ref.name,\n        domain = _ref.domain;\n    return /*#__PURE__*/_jsxs(Link, {\n      href: \"/website/[...id]\",\n      as: \"/website/\".concat(website_id, \"/\").concat(name),\n      children: [/*#__PURE__*/_jsx(Favicon, {\n        domain: domain\n      }), name]\n    });\n  };\n\n  var columns = [{\n    key: 'name',\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"label.name\",\n      defaultMessage: \"Name\"\n    }),\n    className: 'col-6 col-xl-4',\n    render: DetailsLink\n  }, {\n    key: 'domain',\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"label.domain\",\n      defaultMessage: \"Domain\"\n    }),\n    className: 'col-6 col-xl-4'\n  }, {\n    key: 'action',\n    className: classNames(styles.buttons, 'col-12 col-xl-4 pt-2 pt-xl-0'),\n    render: Buttons\n  }];\n\n  function handleSave() {\n    setSaved(function (state) {\n      return state + 1;\n    });\n    setMessage( /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"message.save-success\",\n      defaultMessage: \"Saved successfully.\"\n    }));\n    handleClose();\n  }\n\n  function handleClose() {\n    setAddWebsite(null);\n    setEditWebsite(null);\n    setDeleteWebsite(null);\n    setShowCode(null);\n    setShowUrl(null);\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  var empty = /*#__PURE__*/_jsx(EmptyPlaceholder, {\n    msg: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"message.no-websites-configured\",\n      defaultMessage: \"You don't have any websites configured.\"\n    }),\n    children: /*#__PURE__*/_jsx(Button, {\n      icon: /*#__PURE__*/_jsx(Plus, {}),\n      size: \"medium\",\n      onClick: function onClick() {\n        return setAddWebsite(true);\n      },\n      children: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.add-website\",\n        defaultMessage: \"Add website\"\n      })\n    })\n  });\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsxs(PageHeader, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"label.websites\",\n          defaultMessage: \"Websites\"\n        })\n      }), /*#__PURE__*/_jsx(Button, {\n        icon: /*#__PURE__*/_jsx(Plus, {}),\n        size: \"small\",\n        onClick: function onClick() {\n          return setAddWebsite(true);\n        },\n        children: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"label.add-website\",\n          defaultMessage: \"Add website\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(Table, {\n      columns: columns,\n      rows: data,\n      empty: empty\n    }), editWebsite && /*#__PURE__*/_jsx(Modal, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.edit-website\",\n        defaultMessage: \"Edit website\"\n      }),\n      children: /*#__PURE__*/_jsx(WebsiteEditForm, {\n        values: editWebsite,\n        onSave: handleSave,\n        onClose: handleClose\n      })\n    }), addWebsite && /*#__PURE__*/_jsx(Modal, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.add-website\",\n        defaultMessage: \"Add website\"\n      }),\n      children: /*#__PURE__*/_jsx(WebsiteEditForm, {\n        onSave: handleSave,\n        onClose: handleClose\n      })\n    }), deleteWebsite && /*#__PURE__*/_jsx(Modal, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.delete-website\",\n        defaultMessage: \"Delete website\"\n      }),\n      children: /*#__PURE__*/_jsx(DeleteForm, {\n        values: {\n          type: 'website',\n          id: deleteWebsite.website_id,\n          name: deleteWebsite.name\n        },\n        onSave: handleSave,\n        onClose: handleClose\n      })\n    }), showCode && /*#__PURE__*/_jsx(Modal, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.tracking-code\",\n        defaultMessage: \"Tracking code\"\n      }),\n      children: /*#__PURE__*/_jsx(TrackingCodeForm, {\n        values: showCode,\n        onClose: handleClose\n      })\n    }), showUrl && /*#__PURE__*/_jsx(Modal, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.share-url\",\n        defaultMessage: \"Share URL\"\n      }),\n      children: /*#__PURE__*/_jsx(ShareUrlForm, {\n        values: showUrl,\n        onClose: handleClose\n      })\n    }), message && /*#__PURE__*/_jsx(Toast, {\n      message: message,\n      onClose: function onClose() {\n        return setMessage(null);\n      }\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}