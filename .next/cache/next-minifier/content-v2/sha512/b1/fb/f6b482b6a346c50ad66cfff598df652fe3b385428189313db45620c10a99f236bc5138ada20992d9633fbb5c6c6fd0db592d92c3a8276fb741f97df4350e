{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{FCuQ:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"default\",(function(){return k}));var a=n(\"nKUr\"),c=n(\"q1tI\"),i=n(\"80PL\"),r=n(\"/MKj\"),s=n(\"TSYQ\"),u=n.n(s),o=n(\"g4pe\"),d=n.n(o),l=n(\"YFqc\"),j=n.n(l),b=n(\"CUtM\"),O=n(\"tfvX\"),h=n(\"0Kmt\"),f=n(\"dB/W\"),v=n(\"cV5B\"),p=n.n(v),m=n(\"OiYy\"),x=n(\"yR7V\"),w=n(\"4qaV\"),g=n(\"TY48\");function _(){var e,t=Object(r.c)((function(e){return e.user})),n=Object(c.useState)(),i=n[0],s=n[1],o=Object(h.a)(\"/api/websites\").data;if(!o||null===t||void 0===t||!t.is_admin)return null;var l=o.map((function(e){return{label:e.name,value:e.website_id}})),v=null===(e=l.find((function(e){return e.value===(null===i||void 0===i?void 0:i.website_id)})))||void 0===e?void 0:e.value;return Object(a.jsxs)(b.a,{children:[Object(a.jsx)(d.a,{children:i&&Object(a.jsx)(\"script\",{async:!0,defer:!0,\"data-website-id\":i.website_uuid,src:\"/umami.js\"})}),Object(a.jsxs)(O.a,{children:[Object(a.jsx)(\"div\",{children:\"Test Console\"}),Object(a.jsx)(f.a,{value:v||\"Select website\",options:l,onChange:function(e){s(o.find((function(t){return t.website_id===e})))}})]}),!v&&Object(a.jsx)(g.a,{msg:\"I hope you know what you're doing here\"}),v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(\"div\",{className:u()(p.a.test,\"row\"),children:[Object(a.jsxs)(\"div\",{className:\"col-4\",children:[Object(a.jsx)(O.a,{children:\"Page links\"}),Object(a.jsx)(\"div\",{children:Object(a.jsx)(j.a,{href:\"?page=1\",children:Object(a.jsx)(\"a\",{children:\"page one\"})})}),Object(a.jsx)(\"div\",{children:Object(a.jsx)(j.a,{href:\"?page=2\",children:Object(a.jsx)(\"a\",{children:\"page two\"})})})]}),Object(a.jsxs)(\"div\",{className:\"col-4\",children:[Object(a.jsx)(O.a,{children:\"CSS events\"}),Object(a.jsx)(w.a,{id:\"primary-button\",className:\"umami--click--primary-button\",variant:\"action\",children:\"Send event\"})]}),Object(a.jsxs)(\"div\",{className:\"col-4\",children:[Object(a.jsx)(O.a,{children:\"Javascript events\"}),Object(a.jsx)(w.a,{id:\"manual-button\",variant:\"action\",onClick:function(){window.umami(\"event (default)\"),window.umami.trackView(\"/page-view\",\"https://www.google.com\"),window.umami.trackEvent(\"event (custom)\",\"custom-type\")},children:\"Run script\"})]})]}),Object(a.jsx)(\"div\",{className:\"row\",children:Object(a.jsxs)(\"div\",{className:\"col-12\",children:[Object(a.jsx)(m.a,{websiteId:i.website_id,title:i.name,domain:i.domain,showLink:!0}),Object(a.jsx)(O.a,{children:\"Events\"}),Object(a.jsx)(x.a,{websiteId:i.website_id})]})})]})]})}var y=n(\"IA1E\");function k(){return Object(y.a)().loading?null:Object(a.jsx)(i.a,{children:Object(a.jsx)(_,{})})}},GF10:function(e,t,n){e.exports={placeholder:\"EmptyPlaceholder_placeholder__3cc74\",icon:\"EmptyPlaceholder_icon__2JUKU\",msg:\"EmptyPlaceholder_msg__2xIqd\"}},IA1E:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));var a=n(\"vJKn\"),c=n.n(a),i=n(\"rg98\"),r=n(\"q1tI\"),s=n(\"/MKj\"),u=n(\"j6IE\"),o=n(\"20a2\"),d=n(\"jeBt\");function l(){var e=Object(o.useRouter)(),t=Object(s.b)(),n=Object(s.c)((function(e){return e.user})),a=Object(r.useState)(!n),l=a[0],j=a[1],b=Object(r.useState)(n),O=b[0],h=b[1];function f(){return(f=Object(i.a)(c.a.mark((function n(){var a,i,r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j(!0),n.next=3,Object(d.b)(\"\".concat(e.basePath,\"/api/auth/verify\"));case 3:if(a=n.sent,i=a.ok,r=a.data,i){n.next=8;break}return n.abrupt(\"return\",e.push(\"/login\"));case 8:return n.next=10,t(Object(u.b)(r));case 10:h(O),j(!1);case 12:case\"end\":return n.stop()}}),n)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!l&&O||function(){f.apply(this,arguments)}()}),[]),{user:O,loading:l}}},TY48:function(e,t,n){\"use strict\";var a=n(\"nKUr\"),c=(n(\"q1tI\"),n(\"atwx\")),i=n(\"y/Pd\"),r=n(\"GF10\"),s=n.n(r);t.a=function(e){var t=e.msg,n=e.children;return Object(a.jsxs)(\"div\",{className:s.a.placeholder,children:[Object(a.jsx)(c.a,{className:s.a.icon,icon:Object(a.jsx)(i.a,{}),size:\"xlarge\"}),Object(a.jsx)(\"h2\",{className:s.a.msg,children:t}),n]})}},cV5B:function(e,t,n){e.exports={test:\"TestConsole_test__1DRG3\"}},j6IE:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return i}));var a=n(\"i7Pf\"),c=Object(a.b)({name:\"user\",initialState:null,reducers:{updateUser:function(e,t){return t.payload}}}),i=c.actions.updateUser;t.a=c.reducer},yR7V:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return v}));var a=n(\"nKUr\"),c=n(\"cpVT\"),i=n(\"xvhg\"),r=n(\"q1tI\"),s=n(\"Zss7\"),u=n.n(s),o=n(\"FoJg\"),d=n(\"rIuf\"),l=n(\"0Kmt\"),j=n(\"G8Ct\"),b=n(\"TdLA\"),O=n(\"y4Yb\"),h=n(\"bzoS\"),f=n(\"YSmr\");function v(e){var t=e.websiteId,n=e.className,s=e.token,v=Object(j.a)(t),p=Object(i.a)(v,1)[0],m=p.startDate,x=p.endDate,w=p.unit,g=p.modified,_=Object(b.a)(),y=Object(i.a)(_,1)[0],k=Object(O.a)().query,N=Object(h.a)(),E=Object(l.a)(\"/api/website/\".concat(t,\"/events\"),{params:{start_at:+m,end_at:+x,unit:w,tz:y,url:k.url,token:s},headers:Object(c.a)({},f.r,null===N||void 0===N?void 0:N.token)},[g]),I=E.data,S=E.loading,C=Object(r.useMemo)((function(){if(!I)return[];if(S)return I;var e=I.reduce((function(e,t){var n=t.x,a=t.t,c=t.y;return e[n]||(e[n]=[]),e[n].push({t:a,y:c}),e}),{});return Object.keys(e).forEach((function(t){e[t]=Object(d.b)(e[t],m,x,w)})),Object.keys(e).map((function(t,n){var a=u()(f.i[n%f.i.length]);return{label:t,data:e[t],lineTension:0,backgroundColor:a.setAlpha(.6).toRgbString(),borderColor:a.setAlpha(.7).toRgbString(),borderWidth:1}}))}),[I,S]);return I?Object(a.jsx)(o.a,{chartId:\"events-\".concat(t),className:n,datasets:C,unit:w,height:300,records:Object(d.c)(m,x,w),onUpdate:function(e){e.data.datasets=C,e.update()},loading:S,stacked:!0}):null}},\"zl3/\":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/test\",function(){return n(\"FCuQ\")}])}},[[\"zl3/\",0,2,6,8,11,1,3,4,5,7,9,10,12,13,14]]]);","map":{"version":3,"sources":["static/chunks/pages/test-d5ef98287ca84e11f92b.js"],"names":["_N_E","window","push","FCuQ","module","__webpack_exports__","__webpack_require__","r","d","TestPage","jsx_runtime","react","Layout","es","classnames","classnames_default","n","head","head_default","next_link","link_default","Page","PageHeader","useFetch","DropDown","TestConsole_module","TestConsole_module_default","WebsiteChart","EventsChart","Button","EmptyPlaceholder","TestConsole","_options$find","user","Object","state","_useState","website","setWebsite","data","is_admin","options","map","_ref","label","name","value","website_id","selectedValue","find","_ref2","children","a","async","defer","data-website-id","website_uuid","src","onChange","_ref3","msg","className","test","href","id","variant","onClick","umami","trackView","trackEvent","websiteId","title","domain","showLink","useRequireLogin","loading","GF10","exports","placeholder","icon","IA1E","_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","redux_actions_user__WEBPACK_IMPORTED_MODULE_4__","next_router__WEBPACK_IMPORTED_MODULE_5__","lib_web__WEBPACK_IMPORTED_MODULE_6__","router","dispatch","storeUser","setLoading","_useState2","setUser","_loadUser","mark","_callee","_yield$get","ok","wrap","_context","prev","next","concat","basePath","sent","abrupt","stop","apply","this","arguments","loadUser","TY48","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","components_common_Icon__WEBPACK_IMPORTED_MODULE_2__","assets_logo_svg__WEBPACK_IMPORTED_MODULE_3__","_EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4__","_EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4___default","size","cV5B","j6IE","updateUser","_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__","initialState","reducers","action","payload","actions","yR7V","_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_3__","tinycolor2__WEBPACK_IMPORTED_MODULE_4__","tinycolor2__WEBPACK_IMPORTED_MODULE_4___default","_BarChart__WEBPACK_IMPORTED_MODULE_5__","lib_date__WEBPACK_IMPORTED_MODULE_6__","hooks_useFetch__WEBPACK_IMPORTED_MODULE_7__","hooks_useDateRange__WEBPACK_IMPORTED_MODULE_8__","hooks_useTimezone__WEBPACK_IMPORTED_MODULE_9__","hooks_usePageQuery__WEBPACK_IMPORTED_MODULE_10__","hooks_useShareToken__WEBPACK_IMPORTED_MODULE_11__","lib_constants__WEBPACK_IMPORTED_MODULE_12__","token","_useDateRange","dateRange","startDate","endDate","unit","modified","_useTimezone","timezone","query","shareToken","_useFetch","params","start_at","end_at","tz","url","headers","datasets","reduce","obj","x","t","y","keys","forEach","key","index","color","length","lineTension","backgroundColor","setAlpha","toRgbString","borderColor","borderWidth","chartId","height","records","onUpdate","chart","update","stacked","zl3/","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/test-d5ef98287ca84e11f92b.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[32],{\n\n/***/ \"FCuQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"default\", function() { return /* binding */ TestPage; });\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./components/layout/Layout.js + 12 modules\nvar Layout = __webpack_require__(\"80PL\");\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 23 modules\nvar es = __webpack_require__(\"/MKj\");\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(\"TSYQ\");\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/next/head.js\nvar head = __webpack_require__(\"g4pe\");\nvar head_default = /*#__PURE__*/__webpack_require__.n(head);\n\n// EXTERNAL MODULE: ./node_modules/next/link.js\nvar next_link = __webpack_require__(\"YFqc\");\nvar link_default = /*#__PURE__*/__webpack_require__.n(next_link);\n\n// EXTERNAL MODULE: ./components/layout/Page.js\nvar Page = __webpack_require__(\"CUtM\");\n\n// EXTERNAL MODULE: ./components/layout/PageHeader.js\nvar PageHeader = __webpack_require__(\"tfvX\");\n\n// EXTERNAL MODULE: ./hooks/useFetch.js\nvar useFetch = __webpack_require__(\"0Kmt\");\n\n// EXTERNAL MODULE: ./components/common/DropDown.js\nvar DropDown = __webpack_require__(\"dB/W\");\n\n// EXTERNAL MODULE: ./components/pages/TestConsole.module.css\nvar TestConsole_module = __webpack_require__(\"cV5B\");\nvar TestConsole_module_default = /*#__PURE__*/__webpack_require__.n(TestConsole_module);\n\n// EXTERNAL MODULE: ./components/metrics/WebsiteChart.js + 6 modules\nvar WebsiteChart = __webpack_require__(\"OiYy\");\n\n// EXTERNAL MODULE: ./components/metrics/EventsChart.js\nvar EventsChart = __webpack_require__(\"yR7V\");\n\n// EXTERNAL MODULE: ./components/common/Button.js\nvar Button = __webpack_require__(\"4qaV\");\n\n// EXTERNAL MODULE: ./components/common/EmptyPlaceholder.js\nvar EmptyPlaceholder = __webpack_require__(\"TY48\");\n\n// CONCATENATED MODULE: ./components/pages/TestConsole.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction TestConsole() {\n  var _options$find;\n\n  var user = Object(es[\"c\" /* useSelector */])(function (state) {\n    return state.user;\n  });\n\n  var _useState = Object(react[\"useState\"])(),\n      website = _useState[0],\n      setWebsite = _useState[1];\n\n  var _useFetch = Object(useFetch[\"a\" /* default */])('/api/websites'),\n      data = _useFetch.data;\n\n  if (!data || !(user !== null && user !== void 0 && user.is_admin)) {\n    return null;\n  }\n\n  var options = data.map(function (_ref) {\n    var name = _ref.name,\n        website_id = _ref.website_id;\n    return {\n      label: name,\n      value: website_id\n    };\n  });\n  var selectedValue = (_options$find = options.find(function (_ref2) {\n    var value = _ref2.value;\n    return value === (website === null || website === void 0 ? void 0 : website.website_id);\n  })) === null || _options$find === void 0 ? void 0 : _options$find.value;\n\n  function handleSelect(value) {\n    setWebsite(data.find(function (_ref3) {\n      var website_id = _ref3.website_id;\n      return website_id === value;\n    }));\n  }\n\n  function handleClick() {\n    window.umami('event (default)');\n    window.umami.trackView('/page-view', 'https://www.google.com');\n    window.umami.trackEvent('event (custom)', 'custom-type');\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Page[\"a\" /* default */], {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(head_default.a, {\n      children:  true && website && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"script\", {\n        async: true,\n        defer: true,\n        \"data-website-id\": website.website_uuid,\n        src: \"/umami.js\"\n      })\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(PageHeader[\"a\" /* default */], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: \"Test Console\"\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DropDown[\"a\" /* default */], {\n        value: selectedValue || 'Select website',\n        options: options,\n        onChange: handleSelect\n      })]\n    }), !selectedValue && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EmptyPlaceholder[\"a\" /* default */], {\n      msg: \"I hope you know what you're doing here\"\n    }), selectedValue && /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: classnames_default()(TestConsole_module_default.a.test, 'row'),\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PageHeader[\"a\" /* default */], {\n            children: \"Page links\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n            children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(link_default.a, {\n              href: \"?page=1\",\n              children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n                children: \"page one\"\n              })\n            })\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n            children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(link_default.a, {\n              href: \"?page=2\",\n              children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n                children: \"page two\"\n              })\n            })\n          })]\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PageHeader[\"a\" /* default */], {\n            children: \"CSS events\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */], {\n            id: \"primary-button\",\n            className: \"umami--click--primary-button\",\n            variant: \"action\",\n            children: \"Send event\"\n          })]\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PageHeader[\"a\" /* default */], {\n            children: \"Javascript events\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Button[\"a\" /* default */], {\n            id: \"manual-button\",\n            variant: \"action\",\n            onClick: handleClick,\n            children: \"Run script\"\n          })]\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n          className: \"col-12\",\n          children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WebsiteChart[\"a\" /* default */], {\n            websiteId: website.website_id,\n            title: website.name,\n            domain: website.domain,\n            showLink: true\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PageHeader[\"a\" /* default */], {\n            children: \"Events\"\n          }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(EventsChart[\"a\" /* default */], {\n            websiteId: website.website_id\n          })]\n        })\n      })]\n    })]\n  });\n}\n// EXTERNAL MODULE: ./hooks/useRequireLogin.js\nvar useRequireLogin = __webpack_require__(\"IA1E\");\n\n// CONCATENATED MODULE: ./pages/test.js\n\n\n\n\n\nfunction TestPage() {\n  var _useRequireLogin = Object(useRequireLogin[\"a\" /* default */])(),\n      loading = _useRequireLogin.loading;\n\n  if (loading) {\n    return null;\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Layout[\"a\" /* default */], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(TestConsole, {})\n  });\n}\n\n/***/ }),\n\n/***/ \"GF10\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"placeholder\":\"EmptyPlaceholder_placeholder__3cc74\",\"icon\":\"EmptyPlaceholder_icon__2JUKU\",\"msg\":\"EmptyPlaceholder_msg__2xIqd\"};\n\n/***/ }),\n\n/***/ \"IA1E\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useRequireLogin; });\n/* harmony import */ var _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"rg98\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var redux_actions_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"j6IE\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lib_web__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"jeBt\");\n\n\n\n\n\n\n\nfunction useRequireLogin() {\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_5__[\"useRouter\"])();\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useDispatch */ \"b\"])();\n  var storeUser = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useSelector */ \"c\"])(function (state) {\n    return state.user;\n  });\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(!storeUser),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(storeUser),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  function loadUser() {\n    return _loadUser.apply(this, arguments);\n  }\n\n  function _loadUser() {\n    _loadUser = Object(_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n      var _yield$get, ok, data;\n\n      return _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return Object(lib_web__WEBPACK_IMPORTED_MODULE_6__[/* get */ \"b\"])(\"\".concat(router.basePath, \"/api/auth/verify\"));\n\n            case 3:\n              _yield$get = _context.sent;\n              ok = _yield$get.ok;\n              data = _yield$get.data;\n\n              if (ok) {\n                _context.next = 8;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 8:\n              _context.next = 10;\n              return dispatch(Object(redux_actions_user__WEBPACK_IMPORTED_MODULE_4__[/* updateUser */ \"b\"])(data));\n\n            case 10:\n              setUser(user);\n              setLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadUser.apply(this, arguments);\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    loadUser();\n  }, []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\n\n/***/ }),\n\n/***/ \"TY48\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var components_common_Icon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"atwx\");\n/* harmony import */ var assets_logo_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"y/Pd\");\n/* harmony import */ var _EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"GF10\");\n/* harmony import */ var _EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n\n\nfunction EmptyPlaceholder(_ref) {\n  var msg = _ref.msg,\n      children = _ref.children;\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n    className: _EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4___default.a.placeholder,\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(components_common_Icon__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n      className: _EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4___default.a.icon,\n      icon: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(assets_logo_svg__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {}),\n      size: \"xlarge\"\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"h2\", {\n      className: _EmptyPlaceholder_module_css__WEBPACK_IMPORTED_MODULE_4___default.a.msg,\n      children: msg\n    }), children]\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EmptyPlaceholder);\n\n/***/ }),\n\n/***/ \"cV5B\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"test\":\"TestConsole_test__1DRG3\"};\n\n/***/ }),\n\n/***/ \"j6IE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return updateUser; });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"i7Pf\");\n\nvar user = Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__[/* createSlice */ \"b\"])({\n  name: 'user',\n  initialState: null,\n  reducers: {\n    updateUser: function updateUser(state, action) {\n      state = action.payload;\n      return state;\n    }\n  }\n});\nvar updateUser = user.actions.updateUser;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (user.reducer);\n\n/***/ }),\n\n/***/ \"yR7V\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EventsChart; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"cpVT\");\n/* harmony import */ var _Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"xvhg\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"Zss7\");\n/* harmony import */ var tinycolor2__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(tinycolor2__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _BarChart__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"FoJg\");\n/* harmony import */ var lib_date__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"rIuf\");\n/* harmony import */ var hooks_useFetch__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"0Kmt\");\n/* harmony import */ var hooks_useDateRange__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"G8Ct\");\n/* harmony import */ var hooks_useTimezone__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"TdLA\");\n/* harmony import */ var hooks_usePageQuery__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"y4Yb\");\n/* harmony import */ var hooks_useShareToken__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"bzoS\");\n/* harmony import */ var lib_constants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"YSmr\");\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction EventsChart(_ref) {\n  var websiteId = _ref.websiteId,\n      className = _ref.className,\n      token = _ref.token;\n\n  var _useDateRange = Object(hooks_useDateRange__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"])(websiteId),\n      _useDateRange2 = Object(_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useDateRange, 1),\n      dateRange = _useDateRange2[0];\n\n  var startDate = dateRange.startDate,\n      endDate = dateRange.endDate,\n      unit = dateRange.unit,\n      modified = dateRange.modified;\n\n  var _useTimezone = Object(hooks_useTimezone__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"])(),\n      _useTimezone2 = Object(_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(_useTimezone, 1),\n      timezone = _useTimezone2[0];\n\n  var _usePageQuery = Object(hooks_usePageQuery__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"])(),\n      query = _usePageQuery.query;\n\n  var shareToken = Object(hooks_useShareToken__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"])();\n\n  var _useFetch = Object(hooks_useFetch__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(\"/api/website/\".concat(websiteId, \"/events\"), {\n    params: {\n      start_at: +startDate,\n      end_at: +endDate,\n      unit: unit,\n      tz: timezone,\n      url: query.url,\n      token: token\n    },\n    headers: Object(_Users_t_Documents_2_Work_Qiekub_code_umami_umami_node_modules_next_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])({}, lib_constants__WEBPACK_IMPORTED_MODULE_12__[/* TOKEN_HEADER */ \"r\"], shareToken === null || shareToken === void 0 ? void 0 : shareToken.token)\n  }, [modified]),\n      data = _useFetch.data,\n      loading = _useFetch.loading;\n\n  var datasets = Object(react__WEBPACK_IMPORTED_MODULE_3__[\"useMemo\"])(function () {\n    if (!data) return [];\n    if (loading) return data;\n    var map = data.reduce(function (obj, _ref2) {\n      var x = _ref2.x,\n          t = _ref2.t,\n          y = _ref2.y;\n\n      if (!obj[x]) {\n        obj[x] = [];\n      }\n\n      obj[x].push({\n        t: t,\n        y: y\n      });\n      return obj;\n    }, {});\n    Object.keys(map).forEach(function (key) {\n      map[key] = Object(lib_date__WEBPACK_IMPORTED_MODULE_6__[/* getDateArray */ \"b\"])(map[key], startDate, endDate, unit);\n    });\n    return Object.keys(map).map(function (key, index) {\n      var color = tinycolor2__WEBPACK_IMPORTED_MODULE_4___default()(lib_constants__WEBPACK_IMPORTED_MODULE_12__[/* EVENT_COLORS */ \"i\"][index % lib_constants__WEBPACK_IMPORTED_MODULE_12__[/* EVENT_COLORS */ \"i\"].length]);\n      return {\n        label: key,\n        data: map[key],\n        lineTension: 0,\n        backgroundColor: color.setAlpha(0.6).toRgbString(),\n        borderColor: color.setAlpha(0.7).toRgbString(),\n        borderWidth: 1\n      };\n    });\n  }, [data, loading]);\n\n  function handleUpdate(chart) {\n    chart.data.datasets = datasets;\n    chart.update();\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_BarChart__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n    chartId: \"events-\".concat(websiteId),\n    className: className,\n    datasets: datasets,\n    unit: unit,\n    height: 300,\n    records: Object(lib_date__WEBPACK_IMPORTED_MODULE_6__[/* getDateLength */ \"c\"])(startDate, endDate, unit),\n    onUpdate: handleUpdate,\n    loading: loading,\n    stacked: true\n  });\n}\n\n/***/ }),\n\n/***/ \"zl3/\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/test\",\n      function () {\n        return __webpack_require__(\"FCuQ\");\n      }\n    ]);\n  \n\n/***/ })\n\n},[[\"zl3/\",0,2,6,8,11,1,3,4,5,7,9,10,12,13,14]]]);","inputSourceMap":{"version":3,"sources":["/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/components/pages/TestConsole.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/pages/test.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/plugins/mini-css-extract-plugin/src/loader.js??ref--5-oneOf-2-0!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/compiled/css-loader/cjs.js??ref--5-oneOf-2-1!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/compiled/postcss-loader/cjs.js??ref--5-oneOf-2-2!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/components/common/EmptyPlaceholder.module.css","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/hooks/useRequireLogin.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/components/common/EmptyPlaceholder.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/plugins/mini-css-extract-plugin/src/loader.js??ref--5-oneOf-2-0!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/compiled/css-loader/cjs.js??ref--5-oneOf-2-1!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/compiled/postcss-loader/cjs.js??ref--5-oneOf-2-2!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/components/pages/TestConsole.module.css","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/redux/actions/user.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/t/Documents_2/Work/Qiekub/code/umami/umami/components/metrics/EventsChart.js","/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Ftest&absolutePagePath=private-next-pages%2Ftest.js!"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport classNames from 'classnames';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Page from '../layout/Page';\nimport PageHeader from '../layout/PageHeader';\nimport useFetch from '../../hooks/useFetch';\nimport DropDown from '../common/DropDown';\nimport styles from './TestConsole.module.css';\nimport WebsiteChart from '../metrics/WebsiteChart';\nimport EventsChart from '../metrics/EventsChart';\nimport Button from '../common/Button';\nimport EmptyPlaceholder from '../common/EmptyPlaceholder';\nexport default function TestConsole() {\n  var _options$find;\n\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n\n  var _useState = useState(),\n      website = _useState[0],\n      setWebsite = _useState[1];\n\n  var _useFetch = useFetch('/api/websites'),\n      data = _useFetch.data;\n\n  if (!data || !(user !== null && user !== void 0 && user.is_admin)) {\n    return null;\n  }\n\n  var options = data.map(function (_ref) {\n    var name = _ref.name,\n        website_id = _ref.website_id;\n    return {\n      label: name,\n      value: website_id\n    };\n  });\n  var selectedValue = (_options$find = options.find(function (_ref2) {\n    var value = _ref2.value;\n    return value === (website === null || website === void 0 ? void 0 : website.website_id);\n  })) === null || _options$find === void 0 ? void 0 : _options$find.value;\n\n  function handleSelect(value) {\n    setWebsite(data.find(function (_ref3) {\n      var website_id = _ref3.website_id;\n      return website_id === value;\n    }));\n  }\n\n  function handleClick() {\n    window.umami('event (default)');\n    window.umami.trackView('/page-view', 'https://www.google.com');\n    window.umami.trackEvent('event (custom)', 'custom-type');\n  }\n\n  return /*#__PURE__*/_jsxs(Page, {\n    children: [/*#__PURE__*/_jsx(Head, {\n      children: true && website && /*#__PURE__*/_jsx(\"script\", {\n        async: true,\n        defer: true,\n        \"data-website-id\": website.website_uuid,\n        src: \"/umami.js\"\n      })\n    }), /*#__PURE__*/_jsxs(PageHeader, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: \"Test Console\"\n      }), /*#__PURE__*/_jsx(DropDown, {\n        value: selectedValue || 'Select website',\n        options: options,\n        onChange: handleSelect\n      })]\n    }), !selectedValue && /*#__PURE__*/_jsx(EmptyPlaceholder, {\n      msg: \"I hope you know what you're doing here\"\n    }), selectedValue && /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: classNames(styles.test, 'row'),\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/_jsx(PageHeader, {\n            children: \"Page links\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"?page=1\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: \"page one\"\n              })\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Link, {\n              href: \"?page=2\",\n              children: /*#__PURE__*/_jsx(\"a\", {\n                children: \"page two\"\n              })\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/_jsx(PageHeader, {\n            children: \"CSS events\"\n          }), /*#__PURE__*/_jsx(Button, {\n            id: \"primary-button\",\n            className: \"umami--click--primary-button\",\n            variant: \"action\",\n            children: \"Send event\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-4\",\n          children: [/*#__PURE__*/_jsx(PageHeader, {\n            children: \"Javascript events\"\n          }), /*#__PURE__*/_jsx(Button, {\n            id: \"manual-button\",\n            variant: \"action\",\n            onClick: handleClick,\n            children: \"Run script\"\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"col-12\",\n          children: [/*#__PURE__*/_jsx(WebsiteChart, {\n            websiteId: website.website_id,\n            title: website.name,\n            domain: website.domain,\n            showLink: true\n          }), /*#__PURE__*/_jsx(PageHeader, {\n            children: \"Events\"\n          }), /*#__PURE__*/_jsx(EventsChart, {\n            websiteId: website.website_id\n          })]\n        })\n      })]\n    })]\n  });\n}","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Layout from 'components/layout/Layout';\nimport TestConsole from 'components/pages/TestConsole';\nimport useRequireLogin from 'hooks/useRequireLogin';\nexport default function TestPage() {\n  var _useRequireLogin = useRequireLogin(),\n      loading = _useRequireLogin.loading;\n\n  if (loading) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(TestConsole, {})\n  });\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"placeholder\":\"EmptyPlaceholder_placeholder__3cc74\",\"icon\":\"EmptyPlaceholder_icon__2JUKU\",\"msg\":\"EmptyPlaceholder_msg__2xIqd\"};","import _regeneratorRuntime from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateUser } from 'redux/actions/user';\nimport { useRouter } from 'next/router';\nimport { get } from 'lib/web';\nexport default function useRequireLogin() {\n  var router = useRouter();\n  var dispatch = useDispatch();\n  var storeUser = useSelector(function (state) {\n    return state.user;\n  });\n\n  var _useState = useState(!storeUser),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(storeUser),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  function loadUser() {\n    return _loadUser.apply(this, arguments);\n  }\n\n  function _loadUser() {\n    _loadUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$get, ok, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return get(\"\".concat(router.basePath, \"/api/auth/verify\"));\n\n            case 3:\n              _yield$get = _context.sent;\n              ok = _yield$get.ok;\n              data = _yield$get.data;\n\n              if (ok) {\n                _context.next = 8;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 8:\n              _context.next = 10;\n              return dispatch(updateUser(data));\n\n            case 10:\n              setUser(user);\n              setLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadUser.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    loadUser();\n  }, []);\n  return {\n    user: user,\n    loading: loading\n  };\n}","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Icon from 'components/common/Icon';\nimport Logo from 'assets/logo.svg';\nimport styles from './EmptyPlaceholder.module.css';\n\nfunction EmptyPlaceholder(_ref) {\n  var msg = _ref.msg,\n      children = _ref.children;\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.placeholder,\n    children: [/*#__PURE__*/_jsx(Icon, {\n      className: styles.icon,\n      icon: /*#__PURE__*/_jsx(Logo, {}),\n      size: \"xlarge\"\n    }), /*#__PURE__*/_jsx(\"h2\", {\n      className: styles.msg,\n      children: msg\n    }), children]\n  });\n}\n\nexport default EmptyPlaceholder;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"test\":\"TestConsole_test__1DRG3\"};","import { createSlice } from '@reduxjs/toolkit';\nvar user = createSlice({\n  name: 'user',\n  initialState: null,\n  reducers: {\n    updateUser: function updateUser(state, action) {\n      state = action.payload;\n      return state;\n    }\n  }\n});\nvar updateUser = user.actions.updateUser;\nexport { updateUser };\nexport default user.reducer;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/Users/t/Documents_2/Work/Qiekub/code/umami/umami/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useMemo } from 'react';\nimport tinycolor from 'tinycolor2';\nimport BarChart from './BarChart';\nimport { getDateArray, getDateLength } from 'lib/date';\nimport useFetch from 'hooks/useFetch';\nimport useDateRange from 'hooks/useDateRange';\nimport useTimezone from 'hooks/useTimezone';\nimport usePageQuery from 'hooks/usePageQuery';\nimport useShareToken from 'hooks/useShareToken';\nimport { EVENT_COLORS, TOKEN_HEADER } from 'lib/constants';\nexport default function EventsChart(_ref) {\n  var websiteId = _ref.websiteId,\n      className = _ref.className,\n      token = _ref.token;\n\n  var _useDateRange = useDateRange(websiteId),\n      _useDateRange2 = _slicedToArray(_useDateRange, 1),\n      dateRange = _useDateRange2[0];\n\n  var startDate = dateRange.startDate,\n      endDate = dateRange.endDate,\n      unit = dateRange.unit,\n      modified = dateRange.modified;\n\n  var _useTimezone = useTimezone(),\n      _useTimezone2 = _slicedToArray(_useTimezone, 1),\n      timezone = _useTimezone2[0];\n\n  var _usePageQuery = usePageQuery(),\n      query = _usePageQuery.query;\n\n  var shareToken = useShareToken();\n\n  var _useFetch = useFetch(\"/api/website/\".concat(websiteId, \"/events\"), {\n    params: {\n      start_at: +startDate,\n      end_at: +endDate,\n      unit: unit,\n      tz: timezone,\n      url: query.url,\n      token: token\n    },\n    headers: _defineProperty({}, TOKEN_HEADER, shareToken === null || shareToken === void 0 ? void 0 : shareToken.token)\n  }, [modified]),\n      data = _useFetch.data,\n      loading = _useFetch.loading;\n\n  var datasets = useMemo(function () {\n    if (!data) return [];\n    if (loading) return data;\n    var map = data.reduce(function (obj, _ref2) {\n      var x = _ref2.x,\n          t = _ref2.t,\n          y = _ref2.y;\n\n      if (!obj[x]) {\n        obj[x] = [];\n      }\n\n      obj[x].push({\n        t: t,\n        y: y\n      });\n      return obj;\n    }, {});\n    Object.keys(map).forEach(function (key) {\n      map[key] = getDateArray(map[key], startDate, endDate, unit);\n    });\n    return Object.keys(map).map(function (key, index) {\n      var color = tinycolor(EVENT_COLORS[index % EVENT_COLORS.length]);\n      return {\n        label: key,\n        data: map[key],\n        lineTension: 0,\n        backgroundColor: color.setAlpha(0.6).toRgbString(),\n        borderColor: color.setAlpha(0.7).toRgbString(),\n        borderWidth: 1\n      };\n    });\n  }, [data, loading]);\n\n  function handleUpdate(chart) {\n    chart.data.datasets = datasets;\n    chart.update();\n  }\n\n  if (!data) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(BarChart, {\n    chartId: \"events-\".concat(websiteId),\n    className: className,\n    datasets: datasets,\n    unit: unit,\n    height: 300,\n    records: getDateLength(startDate, endDate, unit),\n    onUpdate: handleUpdate,\n    loading: loading,\n    stacked: true\n  });\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/test\",\n      function () {\n        return require(\"private-next-pages/test.js\");\n      }\n    ]);\n  "]}}